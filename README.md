# Проектная работа "Веб-ларек"

Ссылка на репозиторий: [тык](https://github.com/qFlensT/web-larek-frontend)

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- `src/` — исходные файлы проекта
- `src/components/` — папка с JS компонентами
- `src/components/base/` — папка с базовым кодом
- `src/components/common` - папка с компонентами не привязанными к конкретному проекту (легко переносимые)
- `src/components/model` - папка с бизнес логикой, в данном случае с логикой взаимодействия с сервером
- `src/components/view` - папка с компонентами привязанными конкретно к этому проеку и не имеющие логики обработки своего состояния

Важные файлы:

- `src/pages/index.html` — HTML-файл главной страницы
- `src/index.ts` — точка входа приложения, выполняющая функцию контроллера
- `src/styles/styles.scss` — корневой файл стилей
- `src/utils/constants.ts` — файл с константами
- `src/utils/utils.ts` — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура проекта

### Использующийся паттерн

В данном проекте используется паттерн **MVP**. Из-за небольших размеров приложения используется один общий, который расположен по пути `/src/index.ts`, он же является точкой входа в приложение.

### Базовые компоненты

Данные компоненты не привязаны к конкретному приложению и их можно легко переносить между проектами.
Путь: `src/components/base/`

#### В проекте представлены следующие базовые компоненты:

- `Api` - компонент взаимодействия с `API`
- `Component` - компонент описывающий базовую логику графического компонента, представлен в виде _абстрактного класса_.
- `Events` - компонент реализующий паттерн `Observer`

`Api` и `Component` используются только в виде других компонентов, которые произвели наследование от них при помощи ключевого слова `extends`. `Events` в свою очередь используется в проекте как самостоятельная единица.

> Все типы, требующиеся для работы каждого конкретного компонента находятся в файле самого компонента, для лучшей переносимости между проектами.
> **Отсутствуют кросс-импорты.**

### "Общие" (common) компоненты

Компоненты, которые унаследовались от _базового компонента_ `Component`, и представляют из себя что-то среднее между базовыми компонентами по их сути, и компонентами из `View`, речь о которых пойдет далее. Данные компоненты не включают в себя какую-либо логику или собственное управление состоянием, так же у них привязки к конкретному элементу в `HTML` документе на основе которого они будут строится и искать дочерние теги посредством поиска через селектор, вместо этого они принимают `container` - `HTML` элемент на основе которого они будут строится.

Каждый компоненты имеет собственные _пропсы_ - опциональные свойства, на основе которых меняется внутренее состояние компонента, а так же _действия (actions)_ - опциональный объект, куда помещаются _коллбеки_, которые срабатывают при взаимодействии с интерактивными элементами компонента.

Путь: `src/components/common/`

#### Все "Общие" компоненты

- `Card` - карточка, имеет возможность расширения _пропсы_
- `Form` - форма
- `Modal` - модальное окно
- `Success` - компонент успешной покупки
- `/Basket/Basket` - компонент корзины
- `/Basket/BasketItem` - компонент элемента корзины

> Все типы, требующиеся для работы каждого конкретного компонента находятся в файле самого компонента, для лучшей переносимости между проектами.
> **Отсутствуют кросс-импорты.**

### View

В данной категории распологаются компоненты с жесткой привязкой к текущей задаче, все они наследуются от соответствующих `common` компонентов, и сами находят необходимый элемент в `DOM-дереве`, для последующей передачи в _родительский класс_, а так же модифицируют поведение, дабы соответствовать требованиям текущей задачи.
В качестве аргументов каждый компонент из `View` требует объект _имплиментирующий_ интерфейс `IEvents`, расположенный в базовом `Observer-компоненте` `Events`, таким образом каждый компонент заменяет _колбеки_ на общий событийный объект. Эти компоненты так же не имеют контроля над собственным состоянием, а принимают его через _пропсы_.

Путь: `src/components/view/`

#### Все View компоненты

- `CatalogItemView` - карточка товара не имеющая описаний и находящаяся в каталоге, наследуется от `Card`
- `CatalogItemPreviewView` - карточка товара с описанием отображающаяся в _модальном окне_ при нажатии на конкретный `CatalogItemView`, наследуется от `Card`
- `ModalView` - общее модальное окно, наследуется от `Modal`
- `SuccessView` - компонент успешной покупки, наследуется от `Success`
- `/Basket/BasketView` - компонент корзины, наследуется от `Basket`
- `/Basket/BasketItemView` - компонент элемента корзины, наследуется от `BasketItem`.

> Все типы, требующиеся для работы каждого конкретного компонента находятся в файле самого компонента, для лучшей переносимости между проектами.
> **Отсутствуют кросс-импорты.**

### Model

Сдесь описана логика взаимодействия с сервером при помощи классов `CatalogApi` и `OrderApi`, которые в свою очередь _унаследовались_ от базового компонента `Api`.

Путь: `src/components/model/`

> Все типы, требующиеся для работы каждого конкретного компонента находятся в файле самого компонента, для лучшей переносимости между проектами.
> **Отсутствуют кросс-импорты.**

### Presenter

Как и упоминалось раньше в качестве общего _презентера_ для всех компонентов используется корневой файл `index.ts`. Он контроллирует состояние каждого компонента, а так же связывает воедино `Model` и `View`.
Было принято решение не создавать для каждого отдельного компонента из `View` свой `Presenter`, так как показалось что это было бы слишком для такого небольшого проекта.

### Краткая схема организации модулей внутри проекта

![Схема организации кода](./Project_scheme.png 'Схема организации кода')

### Таблица событий

| Событие                    | Передаваемые данные                                          | Описание                                                                                          |
| -------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------------------------------------------- |
| catalogItem:click          | { id: string }                                               | Срабатывает при клике на товар из каталога                                                        |
| catalogItem:addToCartClick | { id: string }                                               | Срабатывает при клике на кнопку "Добавить в корзину"                                              |
| modal:open                 | -                                                            | Срабатывает при открытии модального окна                                                          |
| modal:close                | -                                                            | Срабатывает при закрытии модального окна                                                          |
| order:change               | { address: string } или { paymentType: "online" или "cash" } | Срабатывает при взаимодействии с формой Order                                                     |
| order:submit               | -                                                            | Срабатывает при отправке формы Order                                                              |
| contacts:change            | { email: string } или { phone: string}                       | Срабатывает при взаимодействии с формой Contacts                                                  |
| contacts:submit            | -                                                            | Срабатывает при отправке формы Contacts                                                           |
| basket:buy                 | -                                                            | Срабатывает при нажатии кнопки "Оформить" в корзине                                               |
| basketItem:delete          | { id: string }                                               | Срабатывает при удалении товара из корзины                                                        |
| success:click              | -                                                            | Срабатывает при нажатии на кнопку "За новыми покупками!" у компонента успешного оформления товара |

## Описание классов

### Базовые классы

#### Класс `Api`

Класс `Api` предназначен для выполнения HTTP-запросов к API.

##### Наследование

Класс не наследуется от других классов.

##### Конструктор

Конструктор класса принимает два параметра:

- `baseUrl` (`string`): Базовый URL адрес API.
- `options` (`RequestInit`): Необязательный параметр, представляющий начальные настройки запроса. По умолчанию пустой объект `{}`.

##### Свойства

- `baseUrl` (`readonly string`): Хранит базовый URL адрес API.
- `options` (`protected RequestInit`): Хранит настройки запроса с дополнительными заголовками, включая `Content-Type: application/json`.

##### Методы

###### `protected handleResponse(response: Response): Promise<object>`

Обрабатывает ответ от сервера. Возвращает `Promise`, который разрешается с результатом в формате JSON, если ответ успешен. В случае ошибки возвращает отклоненный `Promise` с текстом ошибки или статусом ответа.

###### `get(uri: string): Promise<object>`

Выполняет GET-запрос по указанному URI относительно `baseUrl`. Возвращает `Promise` с результатом ответа.

- `uri` (`string`): URI ресурса для запроса.

###### `post(uri: string, data: object, method: ApiPostMethods = 'POST'): Promise<object>`

Выполняет запрос к серверу методом POST, PUT или DELETE в зависимости от параметра `method`.

- `uri` (`string`): URI ресурса для запроса.
- `data` (`object`): Объект с данными для отправки в теле запроса.
- `method` (`ApiPostMethods`): HTTP-метод для запроса. По умолчанию `'POST'`. Может принимать значения `'POST'`, `'PUT'` или `'DELETE'`.

#### Класс `Component`

Базовый абстрактный класс для создания компонентов с предоставлением общего инструментария для работы с DOM.

##### Особенности:

- Класс является абстрактным и предназначен для наследования.
- Обобщенный тип `<T>` позволяет определить тип данных, используемых при рендеринге компонента.

##### Конструктор

- `protected constructor(protected readonly _container: HTMLElement)`: Принимает DOM-элемент, который служит контейнером для компонента.

##### Методы

###### `public toggleClass(element: HTMLElement, className: string, force?: boolean)`

Переключает класс для указанного элемента. При наличии параметра `force` принудительно добавляет или удаляет класс.

###### `public addClass(element: HTMLElement, className: string)`

Добавляет класс указанному элементу.

###### `public setClass(element: HTMLElement, className: string)`

Устанавливает (заменяет все существующие классы) указанный класс для элемента.

###### `protected setText(element: HTMLElement, value: unknown)`

Устанавливает текстовое содержимое для элемента. Принимает значение любого типа, преобразуя его в строку.

###### `public setDisabled(element: HTMLElement, state: boolean)`

Изменяет состояние блокировки элемента в зависимости от значения `state`.

###### `protected setHidden(element: HTMLElement)`

Скрывает элемент, изменяя его стиль `display` на `'none'`.

###### `protected setVisible(element: HTMLElement)`

Показывает элемент, удаляя его стиль `display`.

###### `protected setImage(element: HTMLImageElement, src: string, alt?: string)`

Устанавливает источник изображения и альтернативный текст для элемента `<img>`.

###### `public render(data?: Partial<T>): HTMLElement`

Предоставляет корневой DOM-элемент компонента, опционально позволяя обновить его состояние с помощью переданных данных. Возвращает контейнер компонента.

#### Класс `EventEmitter`

`EventEmitter` является классической реализацией шаблона проектирования "Наблюдатель". Это позволяет объектам подписываться на события и реагировать на них, обеспечивая механизм для взаимодействия через события.

##### Особенности

- Позволяет объектам подписываться на определенные события, отписываться от них и инициировать события с данными.
- В расширенных вариантах поддерживает подписку на все события или слушание событий по шаблону.

##### Методы

###### `on<T extends object>(eventName: EventName, callback: (event: T) => void)`

Устанавливает обработчик на событие. Позволяет подписаться на событие с заданным именем.

- `eventName`: Имя события, на которое происходит подписка.
- `callback`: Функция обратного вызова, которая будет вызвана при событии.

###### `off(eventName: EventName, callback: Subscriber)`

Снимает обработчик с события. Позволяет отписаться от события.

- `eventName`: Имя события, от которого происходит отписка.
- `callback`: Функция обратного вызова, которую необходимо удалить.

###### `emit<T extends object>(eventName: string, data?: T)`

Инициирует событие с данными. Вызывает все обработчики, подписанные на данное событие, и передает им данные события.

- `eventName`: Имя инициируемого события.
- `data`: Данные, передаваемые обработчикам события.

###### `onAll(callback: (event: EmitterEvent) => void)`

Подписывается на все события. Позволяет обработать любое инициируемое событие.

- `callback`: Функция обратного вызова для обработки всех событий.

###### `offAll()`

Снимает все обработчики событий. Полностью очищает список подписчиков на события.

###### `trigger<T extends object>(eventName: string, context?: Partial<T>)`

Создает коллбек-триггер для генерации события. Возвращает функцию, которая при вызове инициирует событие с заданным именем и данными.

- `eventName`: Имя события для генерации.
- `context`: Дополнительный контекст, объединяемый с данными события при его инициировании.

#### Класс `Basket`

`Basket` наследуется от базового компонента `Component` и предназначен для управления корзиной покупок в приложении.

##### Свойства

- `_basketListElement`: HTML элемент списка товаров в корзине.
- `_basketButtonElement`: HTML элемент кнопки покупки.
- `_totalPriceElement`: HTML элемент для отображения общей цены товаров в корзине.

##### Конструктор

Принимает два аргумента:

- `_container`: `HTMLElement`, который служит контейнером для корзины.
- `actions`: Объект с действиями, которые можно выполнить в корзине, например, покупка товаров. Это необязательный параметр.

В конструкторе для каждого из основных элементов корзины (`_basketListElement`, `_basketButtonElement`, `_totalPriceElement`) используется вспомогательная функция `ensureElement`, которая гарантирует их наличие в DOM.

##### Методы

###### `clear()`

Очищает список товаров в корзине, устанавливая внутреннее HTML содержимое `_basketListElement` в `null`.

##### Сеттеры

###### `disableBuyButton`

Принимает логическое значение `value`, которое определяет, будет ли кнопка покупки активной или нет.

###### `totalPrice`

Принимает строку или число `value`, которое устанавливает общую стоимость товаров в корзине.

##### Типы

###### `BasketProps`

Описывает свойства компонента корзины, включая:

- `totalPrice`: Общая стоимость товаров в корзине, тип `string | number`.
- `disableBuyButton`: Флаг, указывающий на состояние кнопки покупки, тип `boolean`.

###### `BasketActions`

Описывает действия, доступные для корзины:

- `onBuy`: Функция, вызываемая при нажатии на кнопку покупки.

##### Примечание

Класс `Basket` предоставляет базовый интерфейс для управления корзиной покупок, включая отображение списка товаров, общей стоимости и управление доступностью кнопки покупки. Это позволяет интегрировать компонент корзины в более широкий контекст приложения с возможностью реагирования на действия пользователя.

#### Класс `BasketItem`

`BasketItem` расширяет базовый компонент `Component` для представления элемента товара в корзине покупок.

##### Особенности

- Предоставляет функциональность для управления отдельным элементом корзины, включая отображение информации о товаре и удаление товара из корзины.

##### Конструктор

Принимает два аргумента:

- `_container`: `HTMLLIElement`, DOM-элемент, который служит контейнером для элемента корзины.
- `actions`: Необязательный параметр, содержащий объект действий, в частности, действие удаления элемента из корзины.

В конструкторе инициализируются основные элементы интерфейса товара в корзине, такие как индекс, заголовок, цена и кнопка удаления.

##### Сеттеры

###### `title(value: string)`

Устанавливает заголовок товара. Принимает строку `value`.

###### `price(value: string)`

Устанавливает цену товара. Принимает строку `value`. Если значение не передано, устанавливает текст `'Бесценно'`.

###### `index(value: string)`

Устанавливает индекс товара в списке корзины. Принимает строку `value`.

##### Типы

###### `BasketItemActions`

Описывает действия, связанные с элементом корзины:

- `onDelete`: Функция, вызываемая при удалении элемента из корзины.

###### `BasketItemProps`

Описывает свойства элемента корзины:

- `title`: Название товара.
- `price`: Цена товара. Может быть строкой, числом или `null`.
- `index`: Индекс товара в списке корзины. Может быть числом или строкой.

##### Примечание

Класс `BasketItem` позволяет легко управлять каждым элементом корзины, предоставляя методы для установки его основных характеристик и обработки события удаления. Это обеспечивает гибкость и расширяемость при работе с корзиной покупок в веб-приложении.

#### Класс `Card`

`Card` расширяет базовый компонент `Component` для представления карточки товара или услуги в приложении.

##### Свойства

- `__chipElement`: HTML элемент для отображения категории карточки.
- `__titleElement`: HTML элемент заголовка карточки.
- `__imageElement`: HTML элемент изображения карточки.
- `__priceElement`: HTML элемент для отображения цены товара или услуги.
- `__buttonElement`: HTML элемент кнопки на карточке, может быть `null` если кнопка отсутствует.

##### Конструктор

Принимает два аргумента:

- `container`: `HTMLElement`, который служит контейнером для карточки.
- `actions`: Необязательный параметр, содержащий объект действий `CardActions`. Это может быть, например, действие по клику на кнопку карточки.

В конструкторе инициализируются основные элементы интерфейса карточки, используя вспомогательную функцию `ensureElement`.

##### Методы

###### `set title(value: string)`

Устанавливает заголовок карточки.

###### `set price(value: string)`

Устанавливает цену товара или услуги. Если значение не указано, отображает `"Бесценно"`.

###### `set image(value: string)`

Устанавливает изображение для карточки.

###### `set category(value: keyof typeof CardCategory)`

Устанавливает категорию карточки. Изменяет внешний вид элемента категории в соответствии с выбранной категорией.

##### Типы

###### `CardCategory`

Объект, содержащий возможные категории для карточек и их стилистические модификаторы.

###### `CardActions`

Описывает действия, доступные для карточки:

- `onClick`: Функция, вызываемая при клике на карточку или её кнопку.

###### `CardProps`

Описывает свойства карточки:

- `category`: Категория карточки.
- `title`: Заголовок карточки.
- `image`: Изображение карточки.
- `price`: Цена товара или услуги.

##### Примечание

Класс `Card` предоставляет удобный интерфейс для создания и управления карточками товаров или услуг, позволяя легко настраивать их внешний вид и поведение в зависимости от переданных свойств и действий.

#### Класс `Form`

`Form` расширяет базовый компонент `Component` и предназначен для управления формами в приложении.

##### Свойства

- `__submitButtonElement`: HTML элемент кнопки отправки формы.
- `__errorElement`: HTML элемент для отображения ошибок валидации формы.

##### Конструктор

Принимает два аргумента:

- `_container`: `HTMLFormElement`, который служит контейнером для формы.
- `actions`: Необязательный параметр, содержащий объект действий `FormActions<T>`. Включает в себя обработчики событий ввода в форму и её отправки.

В конструкторе инициализируются кнопка отправки формы и элемент для отображения ошибок, используя вспомогательную функцию `ensureElement`. Также добавляются обработчики событий для ввода данных в форму и её отправки, если они предоставлены в `actions`.

##### Методы

###### `private inputHandler(e: KeyboardEvent)`

Обработчик событий ввода, вызывается при каждом изменении в полях формы. Использует `actions.onInput` для обработки введенных данных и валидации.

###### `private submitHandler(e: SubmitEvent)`

Обработчик событий отправки формы, предотвращает стандартное поведение формы и вызывает `actions.onSubmit`.

##### Сеттеры

###### `set valid(value: boolean)`

Управляет доступностью кнопки отправки формы в зависимости от валидности данных формы.

###### `set errors(value: string[])`

Устанавливает текст ошибок валидации формы, объединяя все сообщения ошибок в одну строку.

##### Типы

###### `FormProps`

Описывает свойства формы:

- `valid`: Булево значение, указывающее на валидность данных формы.
- `errors`: Массив строк с сообщениями об ошибках валидации.

###### `FormActions<T>`

Описывает действия, доступные для формы:

- `onSubmit`: Функция, вызываемая при попытке отправки формы.
- `onInput`: Функция, вызываемая при каждом вводе в поля формы, получает имя поля, его значение и сообщение об ошибке валидации.

##### Примечание

Класс `Form` обеспечивает удобный интерфейс для создания и управления формами, позволяя интегрировать обработку событий ввода и отправки формы, а также управление отображением ошибок валидации.

#### Класс `Modal`

`Modal` расширяет базовый компонент `Component` для создания и управления модальными окнами в приложении.

##### Свойства

- `_closeButton`: HTML элемент кнопки для закрытия модального окна.
- `_content`: HTML элемент, представляющий содержимое модального окна.

##### Конструктор

Принимает два аргумента:

- `container`: `HTMLElement`, который служит контейнером для модального окна.
- `actions`: Необязательный параметр, содержащий объект действий `ModalActions`. Включает в себя обработчики событий открытия и закрытия модального окна.

В конструкторе инициализируются кнопка закрытия и элемент контента модального окна, используя вспомогательную функцию `ensureElement`. Добавляются обработчики событий для закрытия модального окна при клике на кнопку закрытия или вне контента окна.

##### Методы

###### `set content(value: HTMLElement)`

Заменяет содержимое модального окна на новое, принимаемое в качестве аргумента.

###### `open()`

Открывает модальное окно, добавляя класс `modal_active` к контейнеру. Вызывает `actions.onOpen`, если таковой предоставлен.

###### `close()`

Закрывает модальное окно, удаляя класс `modal_active` из контейнера и очищая его содержимое. Вызывает `actions.onClose`, если таковой предоставлен.

###### `render(data: ModalProps): HTMLElement`

Переопределяет метод `render` базового класса. Принимает объект свойств `ModalProps`, открывает модальное окно и возвращает его контейнер.

##### Типы

###### `ModalProps`

Описывает свойства модального окна:

- `content`: `HTMLElement`, содержимое модального окна.

###### `ModalActions`

Описывает действия, доступные для модального окна:

- `onOpen`: Функция, вызываемая при открытии модального окна.
- `onClose`: Функция, вызываемая при закрытии модального окна.

##### Примечание

Класс `Modal` предоставляет удобный интерфейс для создания и управления модальными окнами, включая возможность управления содержимым окна, а также обработку событий открытия и закрытия.

#### Класс `Success`

`Success` расширяет базовый компонент `Component` и предназначен для отображения сообщений об успешном завершении операции, например, подтверждении заказа.

##### Свойства

- `__descriptionElement`: HTML элемент параграфа, используемый для отображения описания успешного действия.

##### Конструктор

Принимает два аргумента:

- `container`: `HTMLElement`, служащий контейнером для компонента успеха.
- `actions`: Необязательный параметр, содержащий объект действий `SuccessActions`. Включает в себя обработчик клика на кнопку закрытия сообщения.

В конструкторе инициализируется элемент описания успешного действия, используя вспомогательную функцию `ensureElement`. Добавляется обработчик события для кнопки закрытия сообщения, если он предоставлен в `actions`.

##### Методы

###### `set total(value: number)`

Устанавливает общую сумму, отображаемую в описании успешного действия, форматируя её в удобочитаемый вид с помощью функции `formatNumber` и добавляя текст о списании синапсов.

##### Типы

###### `SuccessActions`

Описывает действия, доступные для компонента сообщения об успехе:

- `onClick`: Функция, вызываемая при клике на кнопку закрытия сообщения.

###### `SuccessProps`

Описывает свойства компонента сообщения об успехе:

- `total`: Числовое значение, указывающее на общую сумму списания синапсов.

##### Примечание

Класс `Success` обеспечивает эффективный способ отображения подтверждения успешных операций в приложении, позволяя пользователю видеть результаты своих действий в формате понятных и информативных сообщений.

### View классы

#### Класс `BasketItemView`

`BasketItemView` расширяет класс `BasketItem`, специализируя его для представления элемента корзины в пользовательском интерфейсе. Он адаптирован для работы с визуальными и поведенческими аспектами представления элементов корзины.

##### Наследование

Этот класс наследуется от `BasketItem<BasketItemViewProps>`, что позволяет ему использовать все методы и свойства базового класса `BasketItem`, расширяя их дополнительными свойствами и методами для работы с представлением.

##### Конструктор

Принимает один аргумент:

- `events`: `IEvents`, интерфейс брокера событий, используемый для взаимодействия с другими частями приложения через события.

В конструкторе создается новый элемент корзины путем клонирования шаблона. Для обработки удаления элемента из корзины используется событие `'basketItem:delete'`, генерируемое через переданный брокер событий.

##### Свойства

###### `set id(id: string)`

Сеттер, позволяющий установить идентификатор элемента корзины. Идентификатор сохраняется в `dataset` контейнера элемента.

###### `get id()`

Геттер для получения идентификатора элемента корзины из `dataset` контейнера элемента.

##### Типы

###### `BasketItemViewProps`

Тип данных для свойств представления элемента корзины, расширяет `BasketItemProps` добавлением свойства `id`:

- `id`: строка, идентификатор элемента корзины.

##### Примечание

Класс `BasketItemView` обеспечивает специализированную реализацию элемента корзины для использования в веб-интерфейсе, включая возможность взаимодействия с пользователем посредством событийного механизма. Он делает управление элементами корзины гибким и интуитивно понятным.

#### Класс `BasketView`

`BasketView` расширяет класс `Basket`, предназначенный для представления и управления корзиной покупок в пользовательском интерфейсе.

##### Наследование

Этот класс наследует функциональность базового класса `Basket`, добавляя управление визуализацией элементов корзины и их взаимодействие с пользователем через события.

##### Конструктор

Принимает один аргумент:

- `events`: `IEvents`, брокер событий для взаимодействия с другими компонентами системы.

В конструкторе инициализируется шаблон корзины и устанавливается обработчик события на покупку товаров в корзине.

##### Свойства

###### `__items: BasketItemViewProps[]`

Приватное свойство для хранения списка товаров в корзине.

##### Методы

###### `get items()`

Геттер, возвращающий список товаров в корзине.

###### `addItem(props: BasketItemViewProps): this`

Добавляет новый товар в корзину и возвращает текущий экземпляр класса для цепочечных вызовов.

###### `removeItemById(id: string): this`

Удаляет товар из корзины по идентификатору и возвращает текущий экземпляр класса для цепочечных вызовов.

###### `clear(): this`

Очищает корзину от товаров и возвращает текущий экземпляр класса для цепочечных вызовов. Этот метод расширяет базовый метод `clear`, добавляя сброс списка товаров.

###### `get itemsAmount(): number`

Геттер, возвращающий количество товаров в корзине.

###### `render(data?: Partial<BasketProps>): HTMLElement`

Переопределяет базовый метод `render`. Отвечает за отрисовку корзины с текущими т

#### Класс `CatalogItemView`

`CatalogItemView` расширяет класс `Card`, специализируя его для представления элементов каталога в пользовательском интерфейсе. Это позволяет визуализировать продукты или услуги в каталоге, с возможностью взаимодействия с ними через пользовательские события.

##### Наследование

Этот класс наследует функциональность базового класса `Card`, расширяя ее дополнительными свойствами и методами, специфичными для элементов каталога.

##### Конструктор

Принимает один аргумент:

- `events`: `IEvents`, интерфейс для обработки событий, позволяющий элементу каталога взаимодействовать с другими частями приложения через систему событий.

В конструкторе инициализируется элемент каталога путем клонирования шаблона. Для обработки клика по элементу каталога используется событие `'catalogItem:click'`, генерируемое через переданный брокер событий.

##### Свойства

###### `set id(id: string)`

Сеттер, позволяющий установить идентификатор элемента каталога. Идентификатор сохраняется в `dataset` контейнера элемента.

###### `get id()`

Геттер для получения идентификатора элемента каталога из `dataset` контейнера элемента.

##### Типы

###### `CatalogItemViewProps`

Тип данных для свойств представления элемента каталога, расширяет `CardProps` добавлением свойства `id`:

- `id`: строка, идентификатор элемента каталога.

##### Примечание

Класс `CatalogItemView` обеспечивает специализированную реализацию для отображения элементов каталога в интерфейсе пользователя, включая возможность идентификации и взаимодействия с элементами каталога через события, облегчая интеграцию с остальной частью приложения.

#### Класс `CatalogItemPreviewView`

`CatalogItemPreviewView` расширяет класс `Card`, адаптируя его для использования как предварительного просмотра элементов каталога. Этот класс позволяет представлять дополнительную информацию об элементах каталога, такую как описание, и предоставляет возможность добавления элемента в корзину через пользовательский интерфейс.

##### Наследование

Этот класс наследуется от `Card<CatalogItemPreviewViewProps>`, что обеспечивает базовые функциональности визуализации и взаимодействия элемента карточки, расширенные дополнительными свойствами и методами, специфичными для предварительного просмотра элементов каталога.

##### Конструктор

Принимает один аргумент:

- `events`: `IEvents` - брокер событий для взаимодействия с другими компонентами приложения.

В конструкторе инициализируется шаблон предварительного просмотра элемента каталога. При клике на элемент генерируется событие `'catalogItem:addToCartClick'` с идентификатором элемента в качестве данных события.

##### Свойства

###### `set id(id: string)`

Устанавливает идентификатор элемента каталога, сохраняя его в `dataset` контейнера.

###### `get id()`

Возвращает идентификатор элемента каталога из `dataset` контейнера.

###### `set description(value: string)`

Устанавливает описание элемента каталога, отображаемое в соответствующем элементе DOM.

##### Типы

###### `CatalogItemPreviewViewProps`

Определяет свойства для конфигурации предварительного просмотра элемента каталога, включая `id` и `description`, а также наследует все свойства из `CardProps`.

##### Примечание

Класс `CatalogItemPreviewView` обеспечивает функциональное и визуальное расширение стандартной карточки элемента каталога, добавляя возможность отображения дополнительной информации и обработки пользовательских действий, таких как добавление в корзину, что способствует повышению интерактивности и пользовательского опыта в приложениях электронной коммерции.

#### Класс `ContactsView`

`ContactsView` расширяет класс `Form<ContactsForm>`, адаптируя его для работы с формой контактов. Это позволяет обрабатывать пользовательский ввод в поля контактной формы и отправлять эти данные, упрощая взаимодействие с пользователем и сбор информации.

##### Наследование

Этот класс наследуется от `Form<ContactsForm>`, предоставляя все базовые методы и свойства формы, но с уточненной типизацией для работы с конкретными полями контактной формы.

##### Конструктор

Принимает один аргумент:

- `events`: `IEvents` - брокер событий для взаимодействия с другими компонентами системы.

Конструктор инициализирует форму контактов, клонируя соответствующий шаблон. Обработчики событий для ввода данных и отправки формы настроены на генерацию соответствующих событий `contacts:change` и `contacts:submit`, которые позволяют динамически реагировать на действия пользователя в рамках приложения.

##### Типы

###### `ContactsForm`

Определяет тип данных для работы с формой контактов, включая поля:

- `email`: строка, представляющая адрес электронной почты пользователя.
- `phone`: строка, представляющая номер телефона пользователя.

##### Примечание

Класс `ContactsView` обеспечивает специализированный интерфейс для работы с формой контактов, интегрируясь с системой событий приложения для обработки и передачи данных о контактах пользователя. Это позволяет легко собирать, обрабатывать и использовать контактную информацию в различных частях приложения, улучшая взаимодействие с пользователем и эффективность обработки пользовательских данных.

#### Класс `ModalView`

`ModalView` расширяет класс `Modal`, предоставляя реализацию модального окна, интегрированную с системой событий. Это позволяет удобно управлять показом и скрытием модальных окон в приложении, а также реагировать на эти действия через централизованную систему событий.

##### Наследование

Этот класс наследует все свойства и методы базового класса `Modal`, добавляя к ним возможность взаимодействия с системой событий.

##### Конструктор

Принимает один аргумент:

- `events`: `IEvents` — интерфейс для взаимодействия с системой событий, что позволяет модальному окну отправлять события о своем открытии (`modal:open`) и закрытии (`modal:close`).

Конструктор инициализирует модальное окно, используя элемент с идентификатором `#modal-container`. Обработчики событий `onClose` и `onOpen` настроены на отправку соответствующих событий через переданный брокер событий, что позволяет другим частям приложения реагировать на эти действия.

##### Методы

`ModalView` наследует и может использовать все методы базового класса `Modal`, такие как `open()`, `close()` и `setContent(HTMLElement)`, обеспечивая полный контроль над содержимым и состоянием модального окна.

##### Примечание

Класс `ModalView` предоставляет расширенные возможности для работы с модальными окнами в контексте приложения, использующего систему событий для взаимодействия между компонентами. Интеграция с системой событий делает управление модальными окнами гибким и удобным, позволяя легко реализовать сложные сценарии взаимодействия пользователя с приложением.

#### Класс `OrderView`

`OrderView` расширяет класс `Form<OrderForm>`, адаптируя его для работы с формой заказа. Он обеспечивает интеграцию с системой событий для управления процессом создания заказа, от выбора типа оплаты до ввода адреса доставки.

##### Наследование

Этот класс наследуется от `Form<OrderForm>`, позволяя использовать все его базовые функциональности, такие как валидация и отправка формы, при этом добавляя специфичную логику обработки событий формы заказа.

##### Конструктор

Принимает один аргумент:

- `events`: `IEvents` - интерфейс для взаимодействия с системой событий.

Конструктор инициализирует форму заказа, используя шаблон. Он настраивает обработчики событий для полей ввода и кнопок, обеспечивая отправку соответствующих событий в систему событий при изменении состояния формы или выборе типа оплаты.

##### Особенности реализации

- При инициализации формы, кнопки для выбора типа оплаты (наличными или онлайн) настраиваются таким образом, что выбор одного из способов отображается визуально и отправляется соответствующее событие через систему событий (`order:change`), что позволяет другим компонентам реагировать на эти изменения.
- Обработчики событий на кнопках оплаты изменяют стили кнопок для отображения текущего выбора пользователя и отправляют данные о выбранном способе оплаты (`paymentType`) в систему событий.

##### Типы

###### `OrderForm`

Определяет тип данных формы заказа, включая:

- `paymentType`: строка, тип оплаты заказа (`online` или `cash`).
- `address`: строка, адрес доставки заказа.

##### Примечание

Класс `OrderView` обеспечивает специализированную обработку формы заказа в приложении, интегрируя ввод данных пользователя с централизованной системой событий. Это упрощает обработку и передачу данных о заказе между компонентами и модулями системы, улучшая взаимодействие с пользователем и общую архитектуру приложения.

#### Класс `SuccessView`

`SuccessView` наследует функциональность от базового класса `Success` для создания представления успешного сообщения в пользовательском интерфейсе.

##### Наследование

- От `Success`.

##### Конструктор

Принимает параметры:

- `events`: `IEvents` - предоставляет интерфейс для работы с системой событий.

В конструкторе происходит инициализация элемента из шаблона и настройка обработчика событий для кнопки или другого элемента, инициирующего действие, например, закрытие сообщения. Обработчик события вызывает `events.emit('success:click')`, чтобы сигнализировать о клике пользователя.

##### Методы

- Наследует все методы из `Success`.
- Не добавляет новые методы.

##### Использование

Используется для отображения сообщения об успешном действии, например, успешной отправке формы. При нажатии на элемент, связанный с закрытием сообщения, через систему событий отправляется уведомление о клике, что позволяет выполнить соответствующие действия, например, закрыть модальное окно или очистить форму.

### Model классы

#### Класс `CatalogApi`

`CatalogApi` расширяет базовый класс `Api` для выполнения операций API, связанных с каталогом товаров.

##### Наследование

- От `Api`.

##### Конструктор

Конструктор не принимает параметров и вызывает конструктор базового класса `Api`, передавая ему `API_URL` в качестве базового URL API.

##### Методы

- `getCatalogItems`: Асинхронный метод без параметров, который получает список товаров каталога. Метод модифицирует URL изображений товаров, добавляя базовый URL CDN перед путем к изображению.
- `getCatalogItem(id: string)`: Асинхронный метод, принимающий идентификатор товара (`id`) и получающий данные конкретного товара каталога. Аналогично методу `getCatalogItems`, модифицирует URL изображения товара.

##### Использование

Используется для получения данных о товарах из каталога. Метод `getCatalogItems` возвращает список всех товаров с модифицированными ссылками на изображения. Метод `getCatalogItem` возвращает данные о конкретном товаре по его идентификатору, также с модифицированной ссылкой на изображение.

#### Класс `OrderApi`

`OrderApi` расширяет функциональность базового класса `Api` для отправки заказов через API.

##### Наследование

- От `Api`.

##### Конструктор

Конструктор вызывает конструктор базового класса `Api`, передавая `API_URL` в качестве базового адреса API.

##### Методы

- `postOrder(order: Order)`: Асинхронный метод, принимающий объект заказа `Order` и отправляющий его на сервер через POST-запрос. Возвращает промис, результатом которого является объект `OrderDto`, представляющий ответ сервера на создание заказа.

##### Использование

Используется для отправки данных заказа на сервер. Метод `postOrder` позволяет клиентскому приложению отправить информацию о заказе.
